2020-03-02 14:48:36,890 INFO CheckEnrollCard.Controllers.ValuesController - Enroll the card
2020-03-02 14:48:36,902 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 14:48:36,904 INFO CheckEnrollCard.Service.ValidateCard - Format of expire date is allowed
2020-03-02 14:48:36,951 INFO CheckEnrollCard.Service.ValidateCard - In case of card number is start with 4
2020-03-02 14:48:36,957 INFO CheckEnrollCard.Controllers.ValuesController - request check existing card
2020-03-02 14:48:36,968 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 14:48:37,385 DEBUG CheckEnrollCard.Controllers.ValuesController - Card 4111111111111145 does not enrolled
2020-03-02 14:48:37,389 INFO CheckEnrollCard.Controllers.ValuesController - Enrolling the card
2020-03-02 14:54:34,870 INFO CheckEnrollCard.Controllers.ValuesController - request check existing card
2020-03-02 14:54:34,880 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 14:54:35,338 DEBUG CheckEnrollCard.Controllers.ValuesController - Card 4111111111111123 is existing
2020-03-02 14:55:10,533 INFO CheckEnrollCard.Controllers.ValuesController - request check existing card
2020-03-02 14:55:10,540 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 14:55:10,594 DEBUG CheckEnrollCard.Controllers.ValuesController - Card 2111111111111129 is not exist
2020-03-02 14:55:19,214 INFO CheckEnrollCard.Controllers.ValuesController - request check existing card
2020-03-02 14:55:19,220 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 14:55:19,274 DEBUG CheckEnrollCard.Controllers.ValuesController - Card 3111111111111128 is not exist
2020-03-02 14:56:43,561 INFO CheckEnrollCard.Controllers.ValuesController - request check existing card
2020-03-02 14:56:43,574 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 14:56:44,038 DEBUG CheckEnrollCard.Controllers.ValuesController - Card 4111111111111130 is existing
2020-03-02 14:56:49,375 INFO CheckEnrollCard.Controllers.ValuesController - request check existing card
2020-03-02 14:56:49,381 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 14:56:49,439 DEBUG CheckEnrollCard.Controllers.ValuesController - Card 4111111111111136 is not exist
2020-03-02 14:57:01,961 INFO CheckEnrollCard.Controllers.ValuesController - Enroll the card
2020-03-02 14:57:01,966 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 14:57:01,974 INFO CheckEnrollCard.Service.ValidateCard - Format of expire date is allowed
2020-03-02 14:57:01,982 INFO CheckEnrollCard.Service.ValidateCard - In case of card number is start with 4
2020-03-02 14:57:01,988 INFO CheckEnrollCard.Controllers.ValuesController - request check existing card
2020-03-02 14:57:01,993 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 14:57:02,052 DEBUG CheckEnrollCard.Controllers.ValuesController - Card 4111111111111136 is not exist
2020-03-02 14:57:02,187 INFO CheckEnrollCard.Controllers.ValuesController - Enrolling the card successful
2020-03-02 15:02:36,444 INFO CheckEnrollCard.Controllers.ValuesController - Enroll the card
2020-03-02 15:02:36,456 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 15:02:36,462 INFO CheckEnrollCard.Service.ValidateCard - Format of expire date is allowed
2020-03-02 15:02:36,498 INFO CheckEnrollCard.Service.ValidateCard - In case of card number is start with 4
2020-03-02 15:02:36,512 INFO CheckEnrollCard.Controllers.ValuesController - request check existing card
2020-03-02 15:02:36,521 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 15:02:36,923 DEBUG CheckEnrollCard.Controllers.ValuesController - Card 4111111111111130 is existing
2020-03-02 15:02:37,155 ERROR CheckEnrollCard.Controllers.ValuesController - Error: System.Data.Entity.Core.EntityCommandExecutionException: An error occurred while executing the command definition. See the inner exception for details. ---> System.Data.SqlClient.SqlException: Violation of PRIMARY KEY constraint 'PK_CardRegisted'. Cannot insert duplicate key in object 'dbo.CardRegisted'. The duplicate key value is (4111111111111130).
The statement has been terminated.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlDataReader.TryConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString, Boolean isInternal, Boolean forDescribeParameterEncryption, Boolean shouldCacheForAlwaysEncrypted)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, Boolean inRetry, SqlDataReader ds, Boolean describeParameterEncryptionRequest)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Entity.Infrastructure.Interception.DbCommandDispatcher.<Reader>b__c(DbCommand t, DbCommandInterceptionContext`1 c)
   at System.Data.Entity.Infrastructure.Interception.InternalDispatcher`1.Dispatch[TTarget,TInterceptionContext,TResult](TTarget target, Func`3 operation, TInterceptionContext interceptionContext, Action`3 executing, Action`3 executed)
   at System.Data.Entity.Infrastructure.Interception.DbCommandDispatcher.Reader(DbCommand command, DbCommandInterceptionContext interceptionContext)
   at System.Data.Entity.Internal.InterceptableDbCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Entity.Core.EntityClient.Internal.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)
   --- End of inner exception stack trace ---
   at System.Data.Entity.Core.EntityClient.Internal.EntityCommandDefinition.ExecuteStoreCommands(EntityCommand entityCommand, CommandBehavior behavior)
   at System.Data.Entity.Core.EntityClient.Internal.EntityCommandDefinition.Execute(EntityCommand entityCommand, CommandBehavior behavior)
   at System.Data.Entity.Core.EntityClient.EntityCommand.ExecuteReader(CommandBehavior behavior)
   at System.Data.Entity.Core.EntityClient.EntityCommand.ExecuteNonQuery()
   at System.Data.Entity.Core.Objects.ObjectContext.ExecuteFunctionCommand(EntityCommand entityCommand)
   at System.Data.Entity.Core.Objects.ObjectContext.<>c__DisplayClass4b.<ExecuteFunction>b__4a()
   at System.Data.Entity.Core.Objects.ObjectContext.ExecuteInTransaction[T](Func`1 func, IDbExecutionStrategy executionStrategy, Boolean startLocalTransaction, Boolean releaseConnectionOnSuccess)
   at System.Data.Entity.Core.Objects.ObjectContext.<>c__DisplayClass4b.<ExecuteFunction>b__49()
   at System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.Execute[TResult](Func`1 operation)
   at System.Data.Entity.Core.Objects.ObjectContext.ExecuteFunction(String functionName, ObjectParameter[] parameters)
   at CheckEnrollCard.CARDEntities.RegisterCard(String cardNum, String cardType, String cardStat, String expDate) in D:\2c2p-assignment\CheckEnrollCard\CheckEnrollCard\CheckEnrollCard\CARDEntities.Context.cs:line 59
   at CheckEnrollCard.Controllers.ValuesController.enrollCard(CardInfos c) in D:\2c2p-assignment\CheckEnrollCard\CheckEnrollCard\CheckEnrollCard\Controllers\ValuesController.cs:line 63
2020-03-02 15:02:37,160 DEBUG CheckEnrollCard.Controllers.ValuesController - 4111111111111130 : ending of enroll process
2020-03-02 15:02:52,644 INFO CheckEnrollCard.Controllers.ValuesController - Enroll the card
2020-03-02 15:02:52,651 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 15:02:52,659 INFO CheckEnrollCard.Service.ValidateCard - Format of expire date is allowed
2020-03-02 15:02:52,665 INFO CheckEnrollCard.Service.ValidateCard - In case of card number is start with 4
2020-03-02 15:02:52,672 INFO CheckEnrollCard.Controllers.ValuesController - request check existing card
2020-03-02 15:02:52,680 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 15:02:52,737 DEBUG CheckEnrollCard.Controllers.ValuesController - Card 4111111111111139 is not exist
2020-03-02 15:02:52,870 INFO CheckEnrollCard.Controllers.ValuesController - Enrolling the card successful
2020-03-02 15:04:19,329 INFO CheckEnrollCard.Controllers.ValuesController - Enroll the card
2020-03-02 15:04:19,336 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 15:05:50,292 INFO CheckEnrollCard.Controllers.ValuesController - request check existing card
2020-03-02 15:05:50,305 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 15:05:50,746 DEBUG CheckEnrollCard.Controllers.ValuesController - Card 4111111111111145 is existing
2020-03-02 15:05:55,597 INFO CheckEnrollCard.Controllers.ValuesController - request check existing card
2020-03-02 15:05:55,606 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 15:05:55,666 DEBUG CheckEnrollCard.Controllers.ValuesController - Card 4111111111111149 is not exist
2020-03-02 15:06:05,904 INFO CheckEnrollCard.Controllers.ValuesController - Enroll the card
2020-03-02 15:06:05,910 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 15:06:12,826 DEBUG CheckEnrollCard.Service.ValidateCard - Expire date : 022018 is not allowed, month 02 / year 2018
2020-03-02 15:06:17,040 INFO CheckEnrollCard.Controllers.ValuesController - Can not enrolling the card
2020-03-02 16:18:43,020 INFO CheckEnrollCard.Controllers.ValuesController - request check existing card
2020-03-02 16:18:46,496 INFO CheckEnrollCard.Service.ValidateCard - Format card of number is allowed
2020-03-02 16:18:56,352 DEBUG CheckEnrollCard.Controllers.ValuesController - Card 321654987412589 is existing
